<!DOCTYPE html>
<html dir="ltr" lang="de">
  <head>
    <title>Bootstrapping - Rubinius</title>
  	<meta charset="UTF-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta content='de' http-equiv='content-language'>
    <meta content='Rubinius is an implementation of the Ruby programming language. The Rubinius bytecode virtual machine is written in C++. The bytecode compiler is written in pure Ruby. The vast majority of the core library is also written in Ruby, with some supporting primitives that interact with the VM directly.' name='description'>
    <link href='/' rel='home'>
    <link href='/' rel='start'>
    <link href='/doc/de/build-system' rel='prev' title='Bausystem'>
    <link href='/doc/de/virtual-machine'         rel='next' title='Virtuelle Maschine'>
    
    <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]-->

    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" />
    <link href="/stylesheets/pygments.css" media="screen" rel="stylesheet" />

    <link href="/favicon.ico"                 rel="shortcut icon"    type="image/vnd.microsoft.icon" />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" sizes="72x72"   />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" sizes="114x114" />
  </head>

  <body>
    <nav id="sidebar">
  <div class="sidebar-header">
    <a href="#" class="logo">Rubinius</a>
    <div role="search">
      <input type="text" name="q" placeholder="Search docs">
    </div>
  </div>

  <div class="sidebar-nav">
    <ul>
      <li><a href="/doc/en/what-is-rubinius/">What is Rubinius?</a> </li> 
      <li><a href="/doc/en/getting-started/">Getting Started</a>
        <ul>
          <li><a href="/doc/en/getting-started/requirements/">Requirements</a> </li>
          <li><a href="/doc/en/getting-started/building/">Building</a> </li>
          <li><a href="/doc/en/getting-started/running-rubinius/">Running Rubinius</a> </li>
          <li><a href="/doc/en/getting-started/troubleshooting/">Troubleshooting</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/contributing/">Contributing</a>
        <ul>
          <li><a href="/doc/en/contributing/communication/">Communication</a> </li>
          <li><a href="/doc/en/contributing/style-guide">Style Guide</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/ruby/">Ruby</a>
        <ul>
          <li><a href="/doc/en/ruby/scripts/">Scripts</a> </li>
          <li><a href="/doc/en/ruby/methods/">Methods</a> </li>
          <li><a href="/doc/en/ruby/constants/">Constants</a> </li>
          <li><a href="/doc/en/ruby/classes-and-modules/">Classes &amp; Modules</a> </li>
          <li><a href="/doc/en/ruby/blocks-and-procs/">Blocks &amp; Procs</a> </li>
          <li><a href="/doc/en/ruby/local-variables/">Local Variables</a> </li>
          <li><a href="/doc/en/ruby/instance-variables/">Instance Variables</a> </li>
          <li><a href="/doc/en/ruby/class-variables/">Class Variables</a> </li>
          <li><a href="/doc/en/ruby/global-variables/">Global Variables</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/specs/">Specs</a>
        <ul>
          <li><a href="/doc/en/specs/rubyspec/">RubySpec</a> </li> 
          <li><a href="/doc/en/specs/compiler/">Compiler Specs</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/build-system/">Build System</a> </li>
      <li><a href="/doc/en/bootstrapping/">Bootstrapping</a> </li>
      <li><a href="/doc/en/virtual-machine/">Virtual Machine</a> 
        <ul>
          <li><a href="/doc/en/virtual-machine/instructions/">Instructions</a> </li>
          <li><a href="/doc/en/virtual-machine/custom-dispatch-logic/">Custom Dispatch Logic</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/bytecode-compiler/">Bytecode Compiler</a>
        <ul>
          <li><a href="/doc/en/bytecode-compiler/parser/">Parser Stage</a> </li>
          <li><a href="/doc/en/bytecode-compiler/ast/">AST</a> </li>
          <li><a href="/doc/en/bytecode-compiler/generator/">Generator Stage</a> </li>
          <li><a href="/doc/en/bytecode-compiler/encoder/">Encoder Stage</a> </li>
          <li><a href="/doc/en/bytecode-compiler/packager/">Packager Stage</a> </li>
          <li><a href="/doc/en/bytecode-compiler/writer/">Writer Stage</a> </li>
          <li>Printers</li>
          <li><a href="/doc/en/bytecode-compiler/transformations/">Transformations</a> </li>
          <li><a href="/doc/en/bytecode-compiler/customization/">Customizing the Pipeline</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/jit/">JIT Compiler</a> </li>
      <li><a href="/doc/en/memory-system/">Memory system</a> 
        <ul>
          <li><a href="/doc/en/memory-system/object-layout/">Object layout</a> </li>
          <li><a href="/doc/en/memory-system/garbage-collector/">Garbage collector</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/systems/">Rubinius Systems</a>
        <ul>
          <li><a href="/doc/en/systems/primitives/">Primitives</a> </li>
          <li><a href="/doc/en/systems/ffi/">FFI</a> </li>
          <li><a href="/doc/en/systems/concurrency/">Concurrency</a> </li>
          <li><a href="/doc/en/systems/io/">IO</a> </li>
          <li><a href="/doc/en/systems/c-api/">C-API</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/tools/">Tools</a>
        <ul>
          <li><a href="/doc/en/tools/debugger/">Debugger</a> </li>
          <li><a href="/doc/en/tools/profiler/">Profiler</a> </li>
          <li><a href="/doc/en/tools/memory-analysis/">Memory Analysis</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/guides/">Guides</a>
        <ul>
          <li><a href="/doc/en/guides/migrating-from-mri-to-rubinius/">Migrating from MRI to Rubinius</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/how-to/">How-To</a>
        <ul>
          <li><a href="/doc/en/how-to/write-a-ticket/">Write a Ticket</a> </li>
          <li><a href="/doc/en/how-to/write-a-ruby-spec/">Write a Ruby Spec</a> </li>
          <li><a href="/doc/en/how-to/fix-a-failing-spec/">Fix a Failing Spec</a> </li>
          <li><a href="/doc/en/how-to/write-benchmarks/">Write Benchmarks</a> </li>
          <li><a href="/doc/en/how-to/write-a-blog-post/">Write a Blog Post</a> </li>
          <li><a href="/doc/en/how-to/write-documentation/">Write Documentation</a> </li>
          <li><a href="/doc/en/how-to/translate-documentation/">Translate Documentation</a> </li>
          <li><a href="/doc/en/how-to/commit-to-github/">Commit to Github</a> </li>
        </ul>
      </li>
      <li><a href="/doc/en/appendix-a-glossary/">Appendix A - Glossary</a> </li>
      <li><a href="/doc/en/appendix-b-reading-list/">Appendix B - Reading List</a> </li>
      <li><a href="/doc/en/index-of-terms/">Index of Terms</a> </li>
      <li><a href="/doc/en/frequently-asked-questions/">Frequently Asked Questions</a> </li>
    </ul>
  </div>

  <div class="sidebar-footer">
    <ul>
  
  
  
  <li><a href="/doc/de/bootstrapping/"
    
    class="current"
    
    >de</a></li>
  
  
  
  <li><a href="/doc/en/bootstrapping/"
    
    >en</a></li>
  
  
  
  <li><a href="/doc/es/bootstrapping/"
    
    >es</a></li>
  
  
  
  <li><a href="/doc/fr/bootstrapping/"
    
    >fr</a></li>
  
  
  
  <li><a href="/doc/it/bootstrapping/"
    
    >it</a></li>
  
  
  
  <li><a href="/doc/ja/bootstrapping/"
    
    >ja</a></li>
  
  
  
  <li><a href="/doc/pl/bootstrapping/"
    
    >pl</a></li>
  
  
  
  <li><a href="/doc/pt-br/bootstrapping/"
    
    >pt-br</a></li>
  
  
  
  <li><a href="/doc/ru/bootstrapping/"
    
    >ru</a></li>
  
</ul>

    <div class="social">
      <div class="icons">
        <a href="http://twitter.com/rubinius" class="twitter">@rubinius</a>
        <a href="http://github.com/rubinius" class="github">github</a>
      </div>
      <div class="version">
        <a href="https://github.com/rubinius/rubinius/releases/tag/v2.2.10">v2.2.10</a>
      </div>
    </div>
  </div>
</nav>


<div class="container documentation">
  <h2>Bootstrapping</h2>

  

  

    <p>Bootstrapping nennt man den Prozess bei dem sämtliche Funktionalität
aufgebaut wird, die benötigt wird, sodass das System sämtlichen Ruby
code ausführen kann. Es gibt sieben Phasen beim Bootstrapping Prozess:</p>

<ol>
<li><p> VM: Die Virtuelle Maschine kann Bytecode laden und ausführen
 sowie Nachrichten versenden (d.h. Methoden finden und
 aufrufen). Alle primitiven Funktionen sind verfügbar aber noch
 nicht als Ruby methoden eingetragen.</p>

<p> Die Klasse Class muss manuell eingerichtet werden. Dazu wird
 deren +class+ Eintrag auf sie selbst und deren +superclass+
 Eintrag auf Module gesetzt. Neben Class und Module werden
 desweiteren einige weitere Basisklassen erstellt, darunter
 Object, Tuple, LookupTable und MethodTable.</p>

<p> Von dem Zeitpunkt an können Klassen definiert werden. Ca. 35
 eingebaute Klassen (built in classes) werden veranlasst sich
 selbst zu initialisieren, Symbole für die top level Methoden
 (:object_id, :call, :protected etc.) werden erstellt und
 grundlegende Exceptions werden definiert. Außerdem werden alle
 Primitiven Funktionen registriert. Schließlich wird das IO System
 eingerichtet und einige fundamentale Ruby methoden mit den
 entsprechenden Primitiven Funktionen verknüpft.</p>

<p> Zu diesem Zeitpunkt ist genügend Funktionalität im System
 definiert um den Rest des Laufzeitsystems (Kernel) zu laden,
 welche komplett in Ruby geschrieben ist. Das Laden des Kernels
 geschieht in mehreren Pässen, bei der die Sprache wächst.</p></li>
<li><p> alpha: Hier started das Laden des Ruby Codes. Das Öffnen von
 Klassen und Modulen sowie Definieren von Methoden
 funktioniert. Die Mindestfunktionalität um die folgenden Methoden
 zu unterstützen ist in kernel/alpha.rb implementiert:</p>

<p>   attr_reader :sym
   attr_writer :sym
   attr_accessor :sym
   private :sym
   protected :sym
   module_function :sym
   include mod</p>

<p> Außerdem ist es möglich Exceptions zu werfen und den laufenden
 Prozess abzubrechen (beenden). Diese Phase stellt das Fundament
 für die beiden folgenden Phasen dar.</p></li>
<li><p> bootstrap: Diese Phase fährt damit fort die Mindestfunktionalität
 einzurichten, die benötigt wird um platform und common zu
 laden. Zusätzlich werden die Primitiven Funktionen der meisten
 Kernel Klassen hinzugefügt.</p></li>
<li><p> platform: Das FFI (foreign function interface) System wird
 eingerichtet und Ruby Methodenschnittstellen zu
 plattformabhängigen Funktionen werden erstellt. Sobald dies getan
 ist werden weitere plattformabhängige Dinge wie Pointer,
 Dateizugriff, die math Funktionen und POSIX Befehle eingehängt.</p></li>
<li><p> common: Der Großteil der Ruby core Bibliothek und deren Klassen
 werden implementiert. Die Ruby core Klassen werden so
 Implementationsneutral wie möglich gehalten. Außerdem wird die
 meiste Funktionalität der Rubinius-spezifischen Klassen
 hinzugefügt.</p></li>
<li><p> delta: Entgültige Versionen von Methoden wie #attr_reader
 etc. werden hinzugefügt. Implementationsspezifische Versionen von
 Methoden welche die in common bereitgestellten Versionen
 überschreiben werden ebenfalls in das System übernommen.</p></li>
<li><p> loader: Die kompilierte Version von kernel/loader.rb wird ausgeführt.</p>

<p> Die finale Phase richtet den Lebenszyklus eines Rubyprozesses
 ein. Dazu wird die VM mit dem System verbunden, Loadpaths werden
 gesetzt, Anpassungsskripte aus dem Heimverzeichnis werden gelesen
 und ausgeführt, System Signale werden gefangen und
 Kommandozeilenargumente verarbeitet.</p>

<p> Danach wird entweder das übergebene Skript (Ruby Programmdatei)
 ausgeführt oder die interaktive Ruby Shell ausgeführt (IRB).
 Sobald dies beendet ist werden alle registrierten at_exit Blöcke
 ausgeführt, alle Objekte aufgeräumt (finalized) und der Prozess
 wird beendet.</p></li>
</ol>


<h2>Ladereihenfolge</h2>

<p>Die Dateien in den Kernel Verzeichnissen bootstrap, platform, common
und delta implementieren die entsprechenden bootstrapping Phasen, die
oben beschrieben wurden. Die Reihenfolge in der diese Verzeichnisse
geladen werden ist in runtime/index angegeben.</p>

<p>Wenn eine rbc Datei geladen ist wird Code im Script Level und in
Klassen- und Modulrümpfen ausgeführt. Zum Beispiel, beim Laden von</p>

<pre><code>class SomeClass
  attr_accessor :value
end
</code></pre>

<p>wird der Aufruf zu #attr_accessor ausgeführt. Das setzt voraus, dass
jeglicher Code der in Script-, Klassen- oder Modulrümpfen definiert
ist vor der Datei geladen werden muss, die diesen ausführen/benutzen
möchte. Die Datei kernel/alpha.rb definiert den Großteil des Codes der
in Script- oder Modulrümpfen benötigt wird. Jedoch gibt es auch andere
Ladereihenfolgeabhängigkeiten zwischen einigen Dateien in platform,
common, delta und compiler.</p>

<p>Diese Ladereihenfolgeabhängigkeiten sind in den load_order.txt Dateien
beschrieben, die sich jeweils in jedem der kernel/** Verzeichnissen
befinden. Falls Code verändert oder hinzugefügt wird, wodurch weitere
Ladereihenfolgeabhängigkeiten entstehen, müssen die entsprechenden
load_order.txt Dateien angepasst werden. Dabei muss eine Datei von der
eine andere Abhängt über dieser platziert werden. Außerdem muss bei
Hinzufügen einer neuen Datei in den Kernel Verzeichnissen diese
entsprechend in die load_order.txt des Ordners eingetragen werden. Die
Dateien werden dann beim Bauprozess in die entsprechenden runtime/**
Verzeichnisse kopiert. Während jedem der oben genannten bootstrap
Prozesse lädt die VM die Dateien in den load_order.txt Dateien gemäß
ihrer Anordnung.</p>


</div>


    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="/javascripts/jquery-1.3.2.js"></script>
    <script src="/javascripts/paging_keys.js"></script>
    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
